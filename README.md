# MyWebServer
轻量级http服务器
	早在之前刚学习C++时候就听说http项目的大名，毕竟C++适合初学者的网络项目并不多，一问有什么推荐的书籍，几乎无一例外游双的高性能http项目，于是也去买了，但老实说
	对这本书还是有点失望的。
	原因也很简单，这个项目看起来太不cpp了，给我的感觉就是尽是些C with class和linux API，模块与模块之间显得十分混乱，这也是造成我前期学习的最大困扰，一个main函数
	写了几百行，很多数据和API也没有进行封装，很多全局函数这里定义一下，那里用一下，而且老实说这种模块间的依赖关系对我来说也是弱点。简单看过别人比较完美的C++11实现
	主函数只有8行，可谓非常优雅了，不过看了下他的介绍，在看过muduo的设计之后的改进，也许秋招前看看muduo后再把项目润色是个不错的选择。

  言归正传，从这个http项目的收获还是非常多的，也非常理解这么多人推荐http项目，因为确实非常综合，涵盖了网络编程基础，以下是本项目的演进过程，同时也是我的学习过程
	当看到别的有意思的设计或者学了新东西就会试着加入这个项目中。

  1.0：复刻原项目功能，主要是学习原始项目的设计，这个阶段花了比较多的时间，个人还是喜欢使用一个东西去了解底层是怎么做的然后延伸一下相关知识点，比如学习服务器模型，顺便
	去了解其他服务器模型，给后续改进提供思路，用epoll去看看底层是怎么实现的
	2.0：彻底改写线程池，同时也是复习C++11新特性，其中用到了可变参数模板，完美转发，lambda表达式，auto，bind，decltype，标准库锁等等，现在线程池可以支持任意类型
	的任务了，比起之前必须要写一个类，类需要提供一个process接口合适的多，也方便以后继续改。
	3.0：彻底改写定时器，这个过程遇到一个经典bug段错误，也是花了不少时间了解linux下怎么解决这种问题。现在定时器不再是简单的升序链表，而是更加高效的时间堆，顺便也去
	了解了一下成熟服务器的定时器设计，不得不说kafka的时间轮定时器设计的很精彩，后面要是继续改进可以模仿做一个。
	4.0：彻底改写阻塞队列，原项目阻塞队列设计的可以说满是缺陷，现在阻塞队列底层采用deque容器，不再是new出来的固定数组；现在阻塞队列采用的是两个条件变量，分别唤醒，
	而不是原本采用的一个条件变量导致的虚假唤醒；现在队列的出队加以右值引用优化，这使得日志系统采用该阻塞队列，出队不必再重复复制一份。
	5.0：新增redis，在数据库访问前加入这样一个缓存，加速查询，而且现在服务器启动将进行缓存预热，鉴于本项目其实对每个socket设置了epolloneshot，所以没有专门对数据
	库与redis一致性专门设计，后续扩展需要特别注意这个问题，加了redis后续也方便学了分布式后给这个项目加上分布式的功能。
	6.0:增加数据库连接池：避免数据库连接的三次挥手，握手验证，连接拆除的四报文挥手巨大开销，不得不说池化技术实际用的确实多，线程池，内存池，数据库连接池。

  后续学习计划改进点：
	1.改变服务器模型，模仿写一个主从Reactor设计 2.学习下分布式课程，给项目加点分布式的功能 3.定时器改进下，目前的tick相对来说确实有点低效
	4.学习下muduo网络库，然后把所有资源和函数进行合理的封装 5.全局变量，设置之类的专门写一个文件用于加载，目前还是太混乱了
